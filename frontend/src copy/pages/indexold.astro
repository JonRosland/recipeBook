---
import Layout from "../layouts/Layout.astro";
import { getRecipesApi } from "../components/APIFunctions.js";
import Improvement from "../components/Improvement.svelte";
import Search from "../components/Search.svelte";

let recipes = [];

recipes = await getRecipesApi();
---

<Layout title="Alle oppskrifter">
	<h1><a href="/newRecipe/">Legg til ny oppskrift</a></h1>
	<h1>Alle oppskrifter:</h1>

	<ul>
		{
			recipes.map((recipe) => (
				<li>
					<a href={`/recipe/${recipe._id}`}>{recipe.recipeName}</a>
				</li>
			))
		}
	</ul>

	<div class="search-section">
		<h2>SÃ¸k i oppskrifter</h2>
		<Search client:load />
	</div>

	<Improvement client:load location="index" />
</Layout>

<style>
	.search-section {
		margin-top: 75px;
		border-radius: 8px;
		padding: 20px;
	}

	ul {
		list-style: none;
		padding: 0;
	}

	li a:hover {
		text-decoration: underline;
		background-color: yellow;
	}
</style>
